"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){var a=[],r=!0,n=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(e){n=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(n)throw o}}return a}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function SelectorSet(){if(!(this instanceof SelectorSet))return new SelectorSet;this.size=0,this.uid=0,this.selectors=[],this.indexes=Object.create(this.indexes),this.activeIndexes=[]}Object.defineProperty(exports,"__esModule",{value:!0});var docElem=window.document.documentElement,matches=docElem.matches||docElem.webkitMatchesSelector||docElem.mozMatchesSelector||docElem.oMatchesSelector||docElem.msMatchesSelector;SelectorSet.prototype.matchesSelector=function(e,t){return matches.call(e,t)},SelectorSet.prototype.querySelectorAll=function(e,t){return t.querySelectorAll(e)},SelectorSet.prototype.indexes=[];var idRe=/^#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;SelectorSet.prototype.indexes.push({name:"ID",selector:function(e){var t;if(t=e.match(idRe))return t[0].slice(1)},element:function(e){if(e.id)return[e.id]}});var classRe=/^\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;SelectorSet.prototype.indexes.push({name:"CLASS",selector:function(e){var t;if(t=e.match(classRe))return t[0].slice(1)},element:function(e){var t=e.className;if(t){if("string"==typeof t)return t.split(/\s/);if("object"==typeof t&&"baseVal"in t)return t.baseVal.split(/\s/)}}});var Map$1,tagRe=/^((?:[\w\u00c0-\uFFFF\-]|\\.)+)/g;SelectorSet.prototype.indexes.push({name:"TAG",selector:function(e){var t;if(t=e.match(tagRe))return t[0].toUpperCase()},element:function(e){return[e.nodeName.toUpperCase()]}}),SelectorSet.prototype.indexes.default={name:"UNIVERSAL",selector:function(){return!0},element:function(){return[!0]}},Map$1="function"==typeof window.Map?window.Map:function(){function e(){this.map={}}return e.prototype.get=function(e){return this.map[e+" "]},e.prototype.set=function(e,t){this.map[e+" "]=t},e}();var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g;function parseSelectorIndexes(e,t){var a,r,n,o,i,s,c=(e=e.slice(0).concat(e.default)).length,u=t,l=[];do{if(chunker.exec(""),(n=chunker.exec(u))&&(u=n[3],n[2]||!u))for(a=0;a<c;a++)if(i=(s=e[a]).selector(n[1])){for(r=l.length,o=!1;r--;)if(l[r].index===s&&l[r].key===i){o=!0;break}o||l.push({index:s,key:i});break}}while(n);return l}function findByPrototype(e,t){var a,r,n;for(a=0,r=e.length;a<r;a++)if(n=e[a],t.isPrototypeOf(n))return n}function sortById(e,t){return e.id-t.id}SelectorSet.prototype.logDefaultIndexUsed=function(){},SelectorSet.prototype.add=function(e,t){var a,r,n,o,i,s,c,u,l=this.activeIndexes,d=this.selectors;if("string"==typeof e){for(a={id:this.uid++,selector:e,data:t},c=parseSelectorIndexes(this.indexes,e),r=0;r<c.length;r++)o=(u=c[r]).key,(i=findByPrototype(l,n=u.index))||((i=Object.create(n)).map=new Map$1,l.push(i)),n===this.indexes.default&&this.logDefaultIndexUsed(a),(s=i.map.get(o))||(s=[],i.map.set(o,s)),s.push(a);this.size++,d.push(e)}},SelectorSet.prototype.remove=function(e,t){if("string"==typeof e){var a,r,n,o,i,s,c,u,l=this.activeIndexes,d={},f=1===arguments.length;for(a=parseSelectorIndexes(this.indexes,e),n=0;n<a.length;n++)for(r=a[n],o=l.length;o--;)if(s=l[o],r.index.isPrototypeOf(s)){if(c=s.map.get(r.key))for(i=c.length;i--;)(u=c[i]).selector!==e||!f&&u.data!==t||(c.splice(i,1),d[u.id]=!0);break}this.size-=Object.keys(d).length}},SelectorSet.prototype.queryAll=function(e){if(!this.selectors.length)return[];var t,a,r,n,o,i,s,c,u={},l=[],d=this.querySelectorAll(this.selectors.join(", "),e);for(t=0,r=d.length;t<r;t++)for(o=d[t],a=0,n=(i=this.matches(o)).length;a<n;a++)u[(c=i[a]).id]?s=u[c.id]:(s={id:c.id,selector:c.selector,data:c.data,elements:[]},u[c.id]=s,l.push(s)),s.elements.push(o);return l.sort(sortById)},SelectorSet.prototype.matches=function(e){if(!e)return[];var t,a,r,n,o,i,s,c,u,l,d,f=this.activeIndexes,p={},m=[];for(t=0,n=f.length;t<n;t++)if(c=(s=f[t]).element(e))for(a=0,o=c.length;a<o;a++)if(u=s.map.get(c[a]))for(r=0,i=u.length;r<i;r++)!p[d=(l=u[r]).id]&&this.matchesSelector(e,l.selector)&&(p[d]=!0,m.push(l));return m.sort(sortById)};var bubbleEvents={},captureEvents={},propagationStopped=new WeakMap,immediatePropagationStopped=new WeakMap,currentTargets=new WeakMap,currentTargetDesc=Object.getOwnPropertyDescriptor(Event.prototype,"currentTarget");function before(e,t,a){var r=e[t];return e[t]=function(){return a.apply(e,arguments),r.apply(e,arguments)},e}function matches$1(e,t,a){var r=[],n=t;do{if(1!==n.nodeType)break;var o=e.matches(n);if(o.length){var i={node:n,observers:o};a?r.unshift(i):r.push(i)}}while(n=n.parentElement);return r}function trackPropagation(){propagationStopped.set(this,!0)}function trackImmediate(){propagationStopped.set(this,!0),immediatePropagationStopped.set(this,!0)}function getCurrentTarget(){return currentTargets.get(this)||null}function defineCurrentTarget(e,t){currentTargetDesc&&Object.defineProperty(e,"currentTarget",{configurable:!0,enumerable:!0,get:t||currentTargetDesc.get})}function dispatch(e){var t=(1===e.eventPhase?captureEvents:bubbleEvents)[e.type];if(t){var a=matches$1(t,e.target,1===e.eventPhase);if(a.length){before(e,"stopPropagation",trackPropagation),before(e,"stopImmediatePropagation",trackImmediate),defineCurrentTarget(e,getCurrentTarget);for(var r=0,n=a.length;r<n&&!propagationStopped.get(e);r++){var o=a[r];currentTargets.set(e,o.node);for(var i=0,s=o.observers.length;i<s&&!immediatePropagationStopped.get(e);i++)o.observers[i].data.call(o.node,e)}currentTargets.delete(e),defineCurrentTarget(e)}}}function on(e,t,a){var r=!!(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).capture,n=r?captureEvents:bubbleEvents,o=n[e];o||(o=new SelectorSet,n[e]=o,document.addEventListener(e,dispatch,r)),o.add(t,a)}function off(e,t,a){var r=!!(3<arguments.length&&void 0!==arguments[3]?arguments[3]:{}).capture,n=r?captureEvents:bubbleEvents,o=n[e];o&&(o.remove(t,a),o.size||(delete n[e],document.removeEventListener(e,dispatch,r)))}function fire(e,t,a){return e.dispatchEvent(new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:a}))}var $$1=function(e){return new QueryObj(e)};$$1.on=on,$$1.off=off,$$1.fire=fire;var data=[];$$1.data=function(t,a,e){if(t&&a){if(!e){var r=data.find(function(e){return e.elem===t&&e.key===a});return r&&r.value}if(e){var n=data.findIndex(function(e){return e.elem===t&&e.key===a});-1<n&&data.splice(n,1),data.push({key:a,value:e,elem:t})}}},$$1.arr=function(e){return null==e?[]:Array.from(e)};var QueryObj=function(){function r(e){_classCallCheck(this,r);var t=document.querySelectorAll(e),a=Array.from(t);e.endsWith(":first")&&(a=a.slice(0,1)),this.arr=a}return _createClass(r,[{key:"get",value:function(e){if(void 0===e)return this.arr;try{return this.arr[e]}catch(e){return}}},{key:"data",value:function(e,t){for(var a=0;a<this.arr.length;a++){var r=this.arr[a];$$1.data(r,e,t)}}},{key:"on",value:function(t,a){this.arr.forEach(function(e){e.addEventListener(t,a)})}}]),r}();function forEachAncestorMatch(e){var t=e.elem,a=e.selector,r=e.callback,n=t.closest(a);if(n){r(n);var o=n.parentNode;o&&forEachAncestorMatch({elem:o,selector:a,callback:r})}}function getParents(e){var t=e.elem,a=e.selector,r=[];for(e.includeCurrentElement||(t=t.parentNode);t&&t!==document;t=t.parentNode)(!a||a&&t.matches(a))&&r.push(t);return r}function findInParents(e,t){var a=e.parentElement.querySelector(t);return a||e.parentElement===document.documentElement?a:findInParents(e.parentElement,t)}function forEachAttr(e,t){for(var a=e.attributes,r=a.length,n=0;n<r;n++){t(a[n].name,a[n].value)}}function getElementOffset(e){var t=e.getBoundingClientRect(),a=t.top+window.pageYOffset,r=t.left+window.pageXOffset,n=t.width+r,o=t.height+a;return{top:a,right:n,bottom:o,left:r,width:n-r,height:o-a}}function removeSpacesInParentheses(e){for(var t=e.split(""),a=[],r=!1,n=0;n<t.length;n++){var o=t[n];"("===o?r=!0:")"===o?r=!1:r&&" "===o&&(o=""),a.push(o)}return a.join("")}function formatSpaces(e){return e.trim().replace(/  +/g," ")}function parseAttributeString(e){return removeSpacesInParentheses(formatSpaces(e)).split(" ").map(function(e){return e.replace(/\s|\)/g,"").split(/\(|,/)})}function makeParseFunction(a,n){return function(e){var t=e.getAttribute(a);return t?parseAttributeString(t).map(function(a){var r={};return n.forEach(function(e,t){a[t]&&(r[e]=a[t])}),r}):[]}}window.$=$$1;var parseSwitchAttributes=makeParseFunction("data-switches",["name","auto","customName"]),parseSwitchActionAttributes=makeParseFunction("data-switch-actions",["name","type","context"]),parseSwitchStopAttributes=makeParseFunction("data-switch-stop",["name"]),parseSwitchedOnAttributes=makeParseFunction("data-switched-on",["name"]);function parseStringWithIndefiniteNumberOfParams(e){return e?parseAttributeString(e).map(function(e){return{funcName:e[0],args:e.slice(1)}}):[]}function makeSimpleParseFunction(a,r){return function(e){var t=e.getAttribute(a);return t?(t=formatSpaces(t)).split(" ").reduce(function(e,t,a){return e[r[a]]=t,e},{}):{}}}var parseCopyLayoutAttributes=makeSimpleParseFunction("data-copy-layout",["selectorForPositionTarget","xOffset","yOffset","dimensionsName","selectorForDimensionsTarget"]),parseCopyPositionAttributes=makeSimpleParseFunction("data-copy-position",["selectorForPositionTarget","xOffset","yOffset"]),parseCopyDimensionsAttributes=makeSimpleParseFunction("data-copy-dimensions",["selectorForDimensionsTarget","dimensionsName"]);function getAttributeValueAsArray(e,t){var a=e.getAttribute(t);return a?(a=formatSpaces(a)).split(" "):[]}var regexForPhrase=/^[^\(\):,]+$/,regexForPhraseOrSpecialCharacter=/([^\(\):,]+|[\(\):,]|)/g;function getParts(e){return e.match(regexForPhraseOrSpecialCharacter)}function assembleResult(n){var o,i=[],s=!1,c=!1;return n.forEach(function(e,t){var a=n[t-1],r=n[t+1];e&&("("===a&&(s=!0),(":"===a||"("===a&&":"!==r&&")"!==r)&&(c=!0),")"===e&&(o=void 0,c=s=!1),regexForPhrase.test(e)&&"("===r&&(o={},i.push(o),o.name=e.trim()),"("!==a||":"!==r&&")"!==r||regexForPhrase.test(e)&&(o.modifier=e.trim()),s&&c&&regexForPhrase.test(e)&&(o.args=o.args||[],o.args.push(e.trim())))}),i}function processAttributeString(e){return assembleResult(getParts(e))}var lookupParser=[{selector:"[data-copy-layout]",parser:parseCopyLayoutAttributes,name:"both"},{selector:"[data-copy-position]",parser:parseCopyPositionAttributes,name:"position"},{selector:"[data-copy-dimensions]",parser:parseCopyDimensionsAttributes,name:"dimensions"}];function getListOfElementLayoutData(a){var r=[];return lookupParser.forEach(function(e){if(a.matches(e.selector)){var t=e.parser(a);t.copyMethod=e.name,t.xOffset&&(t.xOffset=parseInt(t.xOffset,10)),t.yOffset&&(t.yOffset=parseInt(t.yOffset,10)),r.push(t)}}),r}function copyDimensions(e,t,a){var r=e.width,n=e.height;$$1(t).arr.forEach(function(e){"width"!==a&&"both"!==a||(e.style.width=r+"px"),"height"!==a&&"both"!==a||(e.style.height=n+"px")})}function copyPosition(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,n=e.left,o=e.top;n+=a,o+=r,$$1(t).arr.forEach(function(e){e.style.top=o+"px",e.style.left=n+"px"})}function copyLayout(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.sourceElem,a=e.targetElem,r=e.dimensionsName,n=void 0===r?"width":r,o=e.xOffset,i=void 0===o?0:o,s=e.yOffset,c=void 0===s?0:s,u=getElementOffset(t),l=u.left,d=u.top;l+=i,d+=c,a.style.top=d+"px",a.style.left=l+"px";var f=u.width,p=u.height;"width"!==n&&"both"!==n||(a.style.width=f+"px"),"height"!==n&&"both"!==n||(a.style.height=p+"px")}function isStringANumber(e){return/^\d+$/.test(e)}function dashToCamelCase(e){return e.replace(/-([a-z])/g,function(e){return e[1].toUpperCase()})}function camelCaseToDash(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function getActionElemsFromTargetAndParents(e){return getParents({elem:e,selector:"[data-switch-actions], [data-switch-stop]",includeCurrentElement:!0})}function getActionsData(e){return e.reduce(function(e,t){var a=[];return t.matches("[data-switch-actions]")&&(a=a.concat(parseSwitchActionAttributes(t))),t.matches("[data-switch-stop]")&&(a=a.concat(parseSwitchStopAttributes(t))),a.forEach(function(e){return e.elem=t}),e.concat(a)},[])}function processActions(e){var a=[],r=[],n=[];return e.forEach(function(t){a.some(function(e){return e.name===t.name})||(t.type?r.push(t):n.push(t),a.push(t))}),{actionsToTrigger:r,stopActions:n}}function getTargetSwitchElements(e){var t,a=e.name,r=e.context,n=e.elem,o="[data-switches~='".concat(a,"'], [data-switches*='").concat(a,"(']");if(r){if("ancestors"===r)t=getParents({elem:n,selector:o,includeCurrentElement:!0});else if(isStringANumber(r)){var i=parseInt(r,10);t=$$1(o).arr.splice(i,1)}}else t=$$1(o).arr;return t}function getSwitchesByNameFromElements(a,e){return e.map(function(e){var t=parseSwitchAttributes(e).find(function(e){return e.name===a});return t.elem=e,t})}function isOn(e,t){return t.matches("[data-switched-on~=".concat(e,"]"))}function getTurnedOnSwitchNamesFromElem(e){return parseSwitchedOnAttributes(e).map(function(e){return e.name})}function turnOn(e,t){var a=isOn(e.name,e.elem);if(!a){var r=getTurnedOnSwitchNamesFromElem(e.elem);r.push(e.name),e.customName&&r.push(e.customName),e.elem.setAttribute("data-switched-on",r.join(" "))}t=Object.assign({},t,{type:"on"}),e.on=a,triggerCallbacks(e,t)}function turnOff(r,e){var t=isOn(r.name,r.elem);if(t){var a=getTurnedOnSwitchNamesFromElem(r.elem).filter(function(e){var t=e===r.name,a=e===r.customName;return!t&&!a});0<a.length?r.elem.setAttribute("data-switched-on",a.join(" ")):r.elem.removeAttribute("data-switched-on")}e=Object.assign({},e,{type:"off"}),r.on=t,triggerCallbacks(r,e)}function toggle(e,t){var a=isOn(e.name,e.elem);a?turnOff(e,t):turnOn(e,t),e.on=a,triggerCallbacks(e,t)}function automaticallyTurnOffOtherSwitches(r,n){$$1("[data-switched-on]").arr.forEach(function(a){var e=getTurnedOnSwitchNamesFromElem(a);parseSwitchAttributes(a).filter(function(t){return!!e.includes(t.name)&&("no-auto"!==t.auto&&(!n.find(function(e){return e.name===t.name})&&!r.find(function(e){return e.name===t.name&&e.elem===a})))}).forEach(function(e){e.elem=a,turnOff(e)})})}$$1.on("click","[data-copy-layout], [data-copy-position], [data-copy-dimensions]",function(e){var c=e.currentTarget;getListOfElementLayoutData(c).forEach(function(e){var t=e.selectorForPositionTarget,a=e.xOffset,r=e.yOffset,n=e.dimensionsName,o=e.selectorForDimensionsTarget,i=e.copyMethod,s=getElementOffset(c);"dimensions"!==i&&"both"!==i||copyDimensions(s,o=o||t,n),"position"!==i&&"both"!==i||copyPosition(s,t,a,r)})}),document.addEventListener("click",function(e){var r=[],t=processActions(getActionsData(getActionElemsFromTargetAndParents(e.target))),a=t.actionsToTrigger,n=t.stopActions;a.forEach(function(t){var e=getTargetSwitchElements(t),a=getSwitchesByNameFromElements(t.name,e);a.forEach(function(e){"toggle"===t.type?toggle(e,t):"on"===t.type?turnOn(e,t):"off"===t.type&&turnOff(e,t)}),r=r.concat(a)}),automaticallyTurnOffOtherSwitches(r,n)});var callbackList=[];function when(e){callbackList.push(e)}function triggerCallbacks(e,a){var r={switchName:e.name,switchAction:a.type,switchElem:e.elem};callbackList.forEach(function(t){Object.keys(t).every(function(e){return"callback"===e||t[e]===r[e]})&&t.callback(e,a)})}var Switches={isOn:isOn,turnOn:turnOn,turnOff:turnOff,toggle:toggle,when:when};function parseNode(e,t){var a=e.getAttribute("data-o-type");return{elemType:a,key:t?e.getAttribute("data-o-key"):null,value:"list"===a?[]:getDataFromNode(e)}}function getDataFromNode(o){var i="data-o-key-",s=i.length,c={};return forEachAttr(o,function(e,t){if(0===e.indexOf(i)){var a=dashToCamelCase(e.substring(s));c[a]=t}else if(0===e.indexOf("data-l-key-")){var r=e.substring(s),n=dashToCamelCase(r);t=getLocationKeyValue(o,r,t),c[n]=t}}),c}function getDataAndDataSourceElemFromNodeAndAncestors(e){var t={};return forEachAncestorMatch({elem:e,selector:'[data-o-type="object"]',callback:function(a){var r=getDataFromNode(a);Object.keys(r).forEach(function(e){var t=r[e];r[e]={value:t,dataSourceElem:a}}),t=Object.assign(r,t)}}),t}function getDataFromLocationString(e,t,a){var r,n=_slicedToArray((a=formatSpaces(a)).split(" "),2),o=n[0],i=n[1];if(!o||"."===o||e.matches(o))r=e;else if("target"===o){var s="[data-l-target-".concat(t,"]");r=e.matches(s)?e:e.querySelector(s)}else r=e.querySelector(o);return{elemAttribute:i,targetElem:r}}function getLocationKeyValue(e,t,a){var r,n=getDataFromLocationString(e,t,a),o=n.elemAttribute,i=n.targetElem;return"string"==typeof(r=0===(o=o||"innerText").indexOf("attr:")?(o=o.substring(5),i&&i.getAttribute(o)):i&&i[o])?r.trim():""}function setLocationKeyValue(e,t,a,r){var n=getDataFromLocationString(e,t,a),o=n.elemAttribute,i=n.targetElem;if(o=o||"innerText",i){var s=r.toString().trim();0===o.indexOf("attr:")?(o=o.substring(5),i.setAttribute(o,s)):i[o]=s}}function setValueForKeyName(e,t,a){var r=camelCaseToDash(t),n="data-o-key-"+r,o="data-l-key-"+r;if(e.hasAttribute(n)&&e.setAttribute(n,a),e.hasAttribute(o)){var i=e.getAttribute(o);setLocationKeyValue(e,r,i,a)}}function createDataObjectFromElement(e){return parseNode(e,!1).value}function addDataFromElementToDataObject(e,t){var a=!Array.isArray(t),r=parseNode(e,a);return a?r.key?(t[r.key]=r.value,r.value):(Object.assign(t,r.value),t):(t.push(r.value),r.value)}function getDataFromRootNode(e){var i;return function e(t,a){var r=t.hasAttribute("data-o-type");if(!t.hasAttribute("data-o-ignore")){r&&((a=a&&addDataFromElementToDataObject(t,a))||i?!a&&i&&(a=addDataFromElementToDataObject(t,i)):(a=createDataObjectFromElement(t),i=a));for(var n=t.children,o=0;o<n.length;o++)e(n[o],a);return i}}(e)}var elemProps=["id","className","type","src","value","checked","innerText","innerHTML","style","title","alt","for","placeholder"],optionsData={watchFunctions:{"*":function(e){var t=e.watchElem,a=(e.watchAttrName,e.camelCaseKeyName,e.value),r=(e.dataSourceElem,e.watchFuncName),n=(e.watchFuncArgs,e.dataTargetElem,r.split("."));if(elemProps.includes(n[0])){var o=t;n.forEach(function(e,t){t+1<n.length?o=o[e]:o[e]=a})}r.startsWith("data-")&&t.setAttribute(r,a)}}};function getValueAndDataSourceElemFromKeyName(e,t){var a="data-o-key-"+t,r="data-l-key-"+t,n="[".concat(a,"], [").concat(r,"]"),o=e.closest(n);if(o.hasAttribute(a))return{dataSourceElem:o,value:o.getAttribute(a)};var i=o.getAttribute(r);return{dataSourceElem:o,value:getLocationKeyValue(o,t,i)}}function callWatchFunctionsOnElem(e){var r=e.watchElem,n=e.watchAttrName,o=e.value,i=e.dataSourceElem,s=e.dataTargetElem,c=dashToCamelCase(n.substring("data-w-key-".length));parseStringWithIndefiniteNumberOfParams(r.getAttribute(n)).forEach(function(e){var t=e.funcName,a=e.args;(optionsData.watchFunctions&&(optionsData.watchFunctions[t]||optionsData.watchFunctions["*"]))({watchElem:r,watchAttrName:n,camelCaseKeyName:c,value:o,dataSourceElem:i,watchFuncName:t,watchFuncArgs:a,dataTargetElem:s})})}function callMultipleWatchFunctions(e){var s="data-w-key-",c=s.length;e.forEach(function(i){forEachAttr(i,function(e,t){if(0===e.indexOf(s)){var a=e.substring(c),r=getValueAndDataSourceElemFromKeyName(i,a),n=r.value,o=r.dataSourceElem;callWatchFunctionsOnElem({watchElem:i,watchAttrName:e,value:n,dataSourceElem:o,dataTargetElem:o})}})})}function getWatchElements(e){var t=e.elementWithData,a=e.dashCaseKeyName,r="[data-w-key-".concat(a,"]"),n=":scope [data-o-key-".concat(a,"] [data-w-key-").concat(a,"]"),o=[];t.matches(r)&&o.push(t);var i=Array.from(t.querySelectorAll(r)),s=Array.from(t.querySelectorAll(n));return o.concat(i.filter(function(e){return!s.includes(e)}))}var afterSyncCallbacks=[];function afterSync(e){afterSyncCallbacks.push(e)}function syncDataBetweenElements(e){var t=e.sourceElement,s=e.targetElement,a=e.shouldTriggerSave,c=[],u=getDataAndDataSourceElemFromNodeAndAncestors(t);Object.keys(u).forEach(function(e){var t=u[e].value,a=u[e].dataSourceElem,r=camelCaseToDash(e),n=syncToLocationOrOutputKey({targetElement:s,camelCaseKeyName:e,dashCaseKeyName:r,originalValue:t,dataSourceElem:a}),o=n.actualValue,i=n.closestMatchingElem;syncToInputKeys({targetElement:s,camelCaseKeyName:e,actualValue:o}),i&&-1===c.indexOf(i)&&c.push(i)}),callAfterSyncCallbacks({elementsDataWasSyncedInto:c,sourceElement:t,targetElement:s,shouldTriggerSave:a,data:u})}function triggerSyncAndSave(e){e.preventDefault();var t=e.currentTarget.closest("[data-i-sync]");setTimeout(function(){syncDataBetweenElements({sourceElement:t,targetElement:$.data(t,"source"),shouldTriggerSave:!0})})}function syncToLocationOrOutputKey(e){var t,a=e.targetElement,r=e.camelCaseKeyName,n=e.dashCaseKeyName,o=e.originalValue,i=e.dataSourceElem,s="[data-l-key-".concat(n,"],[data-o-key-").concat(n,"]"),c=a.closest(s);return c&&(setValueForKeyName(c,r,t=getValueOrDefaultValue(c,o,n)),callWatchFunctions({dashCaseKeyName:n,parentOfTargetElements:c,value:t,dataSourceElem:i})),{actualValue:t,closestMatchingElem:c}}function syncToInputKeys(e){var t=e.targetElement,a=e.camelCaseKeyName,r=e.actualValue,n=t.querySelector("[data-i][name='".concat(a,"'], [data-i][data-i-key='").concat(a,"']"));if(n){var o=n.nodeName.toLowerCase();if("input"===o){var i=n.getAttribute("type");if("radio"===i){var s=t.querySelector("[type='radio'][name='".concat(a,"'][value='").concat(r,"']"));if(!s)return;s.checked=!0}else"checkbox"===i?n.checked=!!r:"text"!==i&&i||(n.value=r)}else"select"!==o&&"textarea"!==o||(n.value=r)}}function callWatchFunctions(e){var t=e.dashCaseKeyName,a=e.parentOfTargetElements,r=e.value,n=e.dataSourceElem;getWatchElements({elementWithData:a,dashCaseKeyName:t}).forEach(function(e){callWatchFunctionsOnElem({watchElem:e,watchAttrName:"data-w-key-".concat(t),value:r,dataSourceElem:n,dataTargetElem:a})})}function callAfterSyncCallbacks(e){var t=e.elementsDataWasSyncedInto,a=e.sourceElement,r=e.targetElement,n=e.shouldTriggerSave,o=e.data;0<afterSyncCallbacks.length&&afterSyncCallbacks.forEach(function(e){e({elementsDataWasSyncedInto:t,sourceElement:a,targetElement:r,shouldTriggerSave:n,data:o})})}function isValueEmpty(e){return!e||/^\s*$/.test(e)}function getDefaultValue(e,t){return e.getAttribute("data-o-default-"+t)||""}function getValueOrDefaultValue(e,t,a){return isValueEmpty(t)?getDefaultValue(e,a):t}function initInboundDataSyncEventListener(){Switches.when({switchAction:"on",callback:function(e,t){setTimeout(function(){e.elem.hasAttribute("data-i-sync")&&(syncDataBetweenElements({sourceElement:t.elem,targetElement:e.elem}),$$1.data(e.elem,"source",t.elem))})}})}function initSaveEventListener(){$$1.on("submit","[data-i-sync]",triggerSyncAndSave),$$1.on("click","[data-i-sync] [data-i-trigger-sync]",triggerSyncAndSave)}function ajax(e){var t=e.url,a=e.method,r=e.data,n=e.callback;fetch(t,{method:a,headers:{Accept:"application/json","Content-Type":"application/json; charset=utf-8"},body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){n(e)})}function ajaxSimple(e,t,a,r){ajax({url:e,method:t,data:a,callback:r})}function ajaxPost(e,t,a){ajaxSimple(e,"POST",t,a)}var saveFunctionsLookup={defaultSave:function(e){var t=e.data,a=e.path,r=e.saveToId;e.elem;ajaxPost("/save",{data:t,path:a,saveToId:r},function(e){optionsData.defaultSaveCallback&&optionsData.defaultSaveCallback(e)})}};function initSaveFunctions(e){Object.assign(saveFunctionsLookup,e)}function enableSaveAttribute(e){e(function(e){var t=e.elementsDataWasSyncedInto;e.targetElement;e.shouldTriggerSave&&t.forEach(function(e){callSaveFunction({elementDataWasSyncedInto:e})})})}function callSaveFunction(e){var t=e.elementDataWasSyncedInto,a=e.targetElement,r=(t=t||a).closest("[data-o-save-deep], [data-o-save]");if(r){var n=r.matches("[data-o-save-deep]"),o=_slicedToArray(getSaveFuncInfo(r,n),3),i=o[0],s=o[1],c=o[2],u=saveFunctionsLookup[i];if(u)u({data:n?getDataFromRootNode(r):getDataFromNode(r),elem:t,path:s,saveToId:c})}}function getSaveFuncInfo(e,t){var a,r,n;return getAttributeValueAsArray(e,t?"data-o-save-deep":"data-o-save").forEach(function(e){e.startsWith("path:")?r=e.substring(5):e.startsWith("id:")?n=e.substring(3):a=e}),[a=a||"defaultSave",r,n]}function initRemoveAndHideEventListeners(){$$1.on("click","[data-i-remove]",function(e){var t=e.currentTarget.closest("[data-i-sync]"),a=$$1.data(t,"source").closest('[data-o-type="object"]'),r=a.parentNode;a.remove(),callSaveFunction({targetElement:r})}),$$1.on("click","[data-i-hide]",function(e){var a=e.currentTarget.closest("[data-i-sync]");forEachAttr(a,function(e,t){e.startsWith("data-o-key-")&&a.setAttribute(e,"")}),triggerSyncAndSave(e)})}function initChoiceAndToggleEventListeners(){$$1.on("click","[data-i][data-i-key][data-i-value]",function(e){var t=e.currentTarget.getAttribute("data-i-key"),a=e.currentTarget.getAttribute("data-i-value");setValue({elem:e.currentTarget,keyName:t,attributeValue:a})}),$$1.on("click","[data-i-toggle]",function(e){var t=e.currentTarget.getAttribute("data-i-toggle");setValue({elem:e.currentTarget,keyName:t,attributeValue:"true",toggleValue:!0})}),$$1.on("change","[data-i][type='radio'], select[data-i]",function(e){var t=e.currentTarget.getAttribute("name"),a=e.currentTarget.value;setValue({elem:e.currentTarget,keyName:t,attributeValue:a})}),$$1.on("change","[data-i][type='checkbox']",function(e){var t=e.currentTarget.getAttribute("name"),a=e.currentTarget.checked?e.currentTarget.value:"";setValue({elem:e.currentTarget,keyName:t,attributeValue:a})})}function setValue(e){var t=e.elem,a=e.keyName,r=e.attributeValue,n=e.toggleValue,o=camelCaseToDash(a),i="data-o-key-"+o,s=t.closest("["+i+"]");n&&s.getAttribute(i)?s.setAttribute(i,""):s.setAttribute(i,r),callWatchFunctions({dashCaseKeyName:o,parentOfTargetElements:s,value:r,dataSourceElem:s})}function initInputElementEventListener(){$$1.on("input","input[data-i], textarea[data-i]",function(e){var t=camelCaseToDash(e.currentTarget.getAttribute("name")),a="data-o-key-"+t,r=e.currentTarget.closest("["+a+"]"),n=e.currentTarget.value;r.setAttribute(a,n),callWatchFunctions({dashCaseKeyName:t,parentOfTargetElements:r,value:n,dataSourceElem:r})})}function initClickToSaveEventListener(){$$1.on("click","[data-i-click-to-save]",function(e){var t=e.currentTarget;"closest"===t.getAttribute("data-i-click-to-save")&&setTimeout(function(){callSaveFunction({targetElement:t})})})}var map="function"==typeof Map?new Map:function(){var a=[],r=[];return{has:function(e){return-1<a.indexOf(e)},get:function(e){return r[a.indexOf(e)]},set:function(e,t){-1===a.indexOf(e)&&(a.push(e),r.push(t))},delete:function(e){var t=a.indexOf(e);-1<t&&(a.splice(t,1),r.splice(t,1))}}}(),createEvent=function(e){return new Event(e,{bubbles:!0})};try{new Event("test")}catch(e){createEvent=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!1),t}}function assign(n){if(n&&n.nodeName&&"TEXTAREA"===n.nodeName&&!map.has(n)){var e,a=null,r=null,o=null,i=function(){n.clientWidth!==r&&l()},s=function(t){window.removeEventListener("resize",i,!1),n.removeEventListener("input",l,!1),n.removeEventListener("keyup",l,!1),n.removeEventListener("autosize:destroy",s,!1),n.removeEventListener("autosize:update",l,!1),Object.keys(t).forEach(function(e){n.style[e]=t[e]}),map.delete(n)}.bind(n,{height:n.style.height,resize:n.style.resize,overflowY:n.style.overflowY,overflowX:n.style.overflowX,wordWrap:n.style.wordWrap});n.addEventListener("autosize:destroy",s,!1),"onpropertychange"in n&&"oninput"in n&&n.addEventListener("keyup",l,!1),window.addEventListener("resize",i,!1),n.addEventListener("input",l,!1),n.addEventListener("autosize:update",l,!1),n.style.overflowX="hidden",n.style.wordWrap="break-word",map.set(n,{destroy:s,update:l}),"vertical"===(e=window.getComputedStyle(n,null)).resize?n.style.resize="none":"both"===e.resize&&(n.style.resize="horizontal"),a="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(a)&&(a=0),l()}function c(e){var t=n.style.width;n.style.width="0px",n.offsetWidth,n.style.width=t,n.style.overflowY=e}function u(){if(0!==n.scrollHeight){var e=function(e){for(var t=[];e&&e.parentNode&&e.parentNode instanceof Element;)e.parentNode.scrollTop&&t.push({node:e.parentNode,scrollTop:e.parentNode.scrollTop}),e=e.parentNode;return t}(n),t=document.documentElement&&document.documentElement.scrollTop;n.style.height="",n.style.height=n.scrollHeight+a+"px",r=n.clientWidth,e.forEach(function(e){e.node.scrollTop=e.scrollTop}),t&&(document.documentElement.scrollTop=t)}}function l(){u();var e=Math.round(parseFloat(n.style.height)),t=window.getComputedStyle(n,null),a="content-box"===t.boxSizing?Math.round(parseFloat(t.height)):n.offsetHeight;if(a<e?"hidden"===t.overflowY&&(c("scroll"),u(),a="content-box"===t.boxSizing?Math.round(parseFloat(window.getComputedStyle(n,null).height)):n.offsetHeight):"hidden"!==t.overflowY&&(c("hidden"),u(),a="content-box"===t.boxSizing?Math.round(parseFloat(window.getComputedStyle(n,null).height)):n.offsetHeight),o!==a){o=a;var r=createEvent("autosize:resized");try{n.dispatchEvent(r)}catch(e){}}}}function destroy(e){var t=map.get(e);t&&t.destroy()}function update(e){var t=map.get(e);t&&t.update()}var autosize=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((autosize=function(e){return e}).destroy=function(e){return e},autosize.update=function(e){return e}):((autosize=function(e,t){return e&&Array.prototype.forEach.call(e.length?e:[e],function(e){return assign(e)}),e}).destroy=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],destroy),e},autosize.update=function(e){return e&&Array.prototype.forEach.call(e.length?e:[e],update),e});var autosize$1=autosize;function initEditableAttribute(){insertRemakeEditPopoverHtml(),$$1.on("click","[data-i-editable], [data-i-editable-with-remove], [data-i-editable-with-hide]",function(e){var t=e.currentTarget,a=_slicedToArray(getEditableInfo(t),2),r=a[0],n=a[1],o=document.querySelector(".remake-edit"),i=processAttributeString(n);removeOutputDataAttributes({elem:o,keep:[]}),addDataOutputKeys({elem:o,config:i}),addFormFieldsBeingEdited({elem:o,config:i});var s=o.querySelector(".remake-edit__edit-areas");s.innerHTML=generateRemakeEditAreas({config:i}),copyLayout({sourceElem:t,targetElem:o,dimensionsName:"width",xOffset:0,yOffset:0});var c={name:r,elem:o},u={name:r,elem:t,type:"on"};Switches.turnOn(c,u);var l=Array.from(s.querySelectorAll("textarea"));setTimeout(function(){l.forEach(function(e){return autosize$1(e)})}),o.querySelector("textarea, input").focus()}),$$1.on("click",".remake-edit__button:not([type='submit'])",function(e){e.preventDefault()})}function getEditableInfo(e){return e.hasAttribute("data-i-editable")?["remakeEdit",e.getAttribute("data-i-editable")]:e.hasAttribute("data-i-editable-with-remove")?["remakeEditWithRemove",e.getAttribute("data-i-editable-with-remove")]:e.hasAttribute("data-i-editable-with-hide")?["remakeEditWithHide",e.getAttribute("data-i-editable-with-hide")]:void 0}function removeOutputDataAttributes(e){var t=e.elem,a=e.keep,r=[];forEachAttr(t,function(e,t){e.startsWith("data-o-key-")&&(a.includes(e)||r.push(e))}),r.forEach(function(e){return t.removeAttribute(e)})}function addDataOutputKeys(e){var t=e.elem;e.config.forEach(function(e){t.setAttribute("data-o-key-"+camelCaseToDash(e.name),"")})}function addFormFieldsBeingEdited(e){var t=e.elem,a=e.config.map(function(e){return e.modifier}).join(" ");t.setAttribute("data-remake-edit-fields",a)}function generateRemakeEditAreas(e){var t=e.config,n="";return t.forEach(function(e){var t,a=e.modifier,r=e.name;"text-single-line"===a&&(t='<input class="remake-edit__input" data-i="" name="'.concat(r,'" type="text">')),"text-multi-line"===a&&(t='<textarea class="remake-edit__textarea" data-i="" name="'.concat(r,'"></textarea>')),n+='<div class="remake-edit__edit-area">'.concat(t,"</div>")}),n}function insertRemakeEditPopoverHtml(){document.body.insertAdjacentHTML("beforeend",'\n  <style>\n    .remake-edit {\n      box-sizing: border-box;\n      display: none;\n      position: absolute;\n      font-family: inherit;\n    }\n\n    .remake-edit * {\n      box-sizing: border-box;\n    }\n\n    [data-switched-on~="remakeEdit"], [data-switched-on~="remakeEditWithRemove"], [data-switched-on~="remakeEditWithHide"] {\n      display: block;\n    }\n\n    .remake-edit__backdrop {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background-color: rgba(0, 0, 0, 0.7);\n      z-index: 9;\n    }\n\n    .remake-edit__edit-container {\n      position: absolute;\n      z-index: 10;\n      min-width: 280px;\n      width: 100%;\n    }\n\n    .remake-edit__edit-areas {\n      margin-bottom: 8px;\n    }\n\n    .remake-edit__textarea, .remake-edit__input {\n      display: block;\n      width: 100%;\n      padding: 7px 14px 9px;\n      font-size: 18px;\n      border: none;\n      outline: none;\n      line-height: 1.4em;\n      box-shadow: 0 2px 2px rgba(0, 0, 0, 0.5);\n      border-radius: 5px;\n    }\n\n    .remake-edit__textarea {\n      min-height: 48px;\n      resize: none;\n    }\n\n    .remake-edit__buttons {\n      display: flex;\n    }\n\n    .remake-edit__button {\n      display: inline-block;\n      margin: 0 8px 0 0;\n      padding: 7px 14px 9px;\n      border: 0;\n      outline: none;\n      font-size: 18px;\n      color: #fff !important;\n      background-color: #228be6;\n      line-height: 1em;\n      box-shadow: 0 2px 2px rgba(0, 0, 0, 0.5);\n      border-radius: 5px;\n      cursor: pointer;\n      user-select: none;\n      text-decoration: none;\n    }\n\n    .remake-edit__button:last-child {\n      margin: 0;\n    }\n\n    .remake-edit__button:hover {\n      background-color: #0b6cbf;\n      color: #fff;\n      text-decoration: none;\n    }\n\n    .remake-edit__button--remove, .remake-edit__button--hide {\n      display: none;\n      background-color: #e03131;\n    }\n\n    .remake-edit__button--remove:hover, .remake-edit__button--hide:hover {\n      background-color: #b42626;\n      color: #fff;\n    }\n\n    [data-switched-on~="remakeEditWithRemove"] .remake-edit__button--remove, [data-switched-on~="remakeEditWithHide"] .remake-edit__button--hide {\n      display: inline-block;\n    }\n\n    .remake-edit__button--cancel {\n      margin-left: auto;\n      background-color: #868E96;\n    }\n\n    .remake-edit__button--cancel:hover {\n      background-color: #64707d;\n      color: #fff;\n    }\n  </style>\n  <div id="remake__auto-generated" data-o-ignore>\n    <form \n      class="remake-edit" \n\n      data-i-sync\n      data-switches="remakeEdit(no-auto) remakeEditWithRemove(no-auto) remakeEditWithHide(no-auto)"\n\n      data-o-type="object"\n    >\n      <div \n        class="remake-edit__backdrop"\n        data-switch-actions="remakeEdit(off) remakeEditWithRemove(off) remakeEditWithHide(off)"\n      ></div>\n      <div class="remake-edit__edit-container">\n        <div class="remake-edit__edit-areas">\n        </div>\n        <div class="remake-edit__buttons">\n          <a \n            class="remake-edit__button remake-edit__button--remove" \n            href="#"\n            data-i-remove\n            data-switch-actions="remakeEdit(off) remakeEditWithRemove(off) remakeEditWithHide(off)"\n          >remove</a>\n          <a \n            class="remake-edit__button remake-edit__button--hide" \n            href="#"\n            data-i-hide\n            data-switch-actions="remakeEdit(off) remakeEditWithRemove(off) remakeEditWithHide(off)"\n          >remove</a>\n          <a \n            class="remake-edit__button remake-edit__button--cancel" \n            href="#"\n            data-switch-actions="remakeEdit(off) remakeEditWithRemove(off) remakeEditWithHide(off)"\n          >cancel</a>\n          <button \n            class="remake-edit__button remake-edit__button--save" \n            type="submit"\n            data-switch-actions="remakeEdit(off) remakeEditWithRemove(off) remakeEditWithHide(off)"\n          >save</button>\n        </div>\n      </div>\n    </form>\n  </div>')}function initAddingItemEventListener(){$$1.on("click","[data-i-new]",function(e){var o=e.currentTarget,t=_slicedToArray(getAttributeValueAsArray(o,"data-i-new"),3),i=t[0],s=t[1],c=t[2];ajaxPost("/new",{templateName:i},function(e){var t=e.htmlString;if(e.success){var a=findInParents(o,s),r="top"===c?"afterbegin":"beforeend";if(a.insertAdjacentHTML(r,t),callSaveFunction({targetElement:a}),optionsData.addItemCallback){var n="top"===c?a.firstElementChild:a.lastElementChild;optionsData.addItemCallback({listElem:a,itemElem:n,templateName:i,ajaxResponse:e})}}else optionsData.addItemCallback&&optionsData.addItemCallback({templateName:i,ajaxResponse:e})})})}var freeGlobal="object"==typeof global&&global&&global.Object===Object&&global,freeSelf="object"==typeof self&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty,nativeObjectToString=objectProto.toString,symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(e){var t=hasOwnProperty.call(e,symToStringTag),a=e[symToStringTag];try{var r=!(e[symToStringTag]=void 0)}catch(e){}var n=nativeObjectToString.call(e);return r&&(t?e[symToStringTag]=a:delete e[symToStringTag]),n}var objectProto$1=Object.prototype,nativeObjectToString$1=objectProto$1.toString;function objectToString(e){return nativeObjectToString$1.call(e)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(e){return null==e?void 0===e?undefinedTag:nullTag:symToStringTag$1&&symToStringTag$1 in Object(e)?getRawTag(e):objectToString(e)}function isObjectLike(e){return null!=e&&"object"==typeof e}var isArray=Array.isArray;function isObject(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function identity(e){return e}var asyncTag="[object AsyncFunction]",funcTag="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(e){if(!isObject(e))return!1;var t=baseGetTag(e);return t==funcTag||t==genTag||t==asyncTag||t==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var e=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function isMasked(e){return!!maskSrcKey&&maskSrcKey in e}var funcProto=Function.prototype,funcToString=funcProto.toString;function toSource(e){if(null!=e){try{return funcToString.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$2=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$1=objectProto$2.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$1).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(e){return!(!isObject(e)||isMasked(e))&&(isFunction(e)?reIsNative:reIsHostCtor).test(toSource(e))}function getValue(e,t){return null==e?void 0:e[t]}function getNative(e,t){var a=getValue(e,t);return baseIsNative(a)?a:void 0}var objectCreate=Object.create,baseCreate=function(){function a(){}return function(e){if(!isObject(e))return{};if(objectCreate)return objectCreate(e);a.prototype=e;var t=new a;return a.prototype=void 0,t}}();function apply(e,t,a){switch(a.length){case 0:return e.call(t);case 1:return e.call(t,a[0]);case 2:return e.call(t,a[0],a[1]);case 3:return e.call(t,a[0],a[1],a[2])}return e.apply(t,a)}function copyArray(e,t){var a=-1,r=e.length;for(t=t||Array(r);++a<r;)t[a]=e[a];return t}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(a){var r=0,n=0;return function(){var e=nativeNow(),t=HOT_SPAN-(e-n);if(n=e,0<t){if(++r>=HOT_COUNT)return arguments[0]}else r=0;return a.apply(void 0,arguments)}}function constant(e){return function(){return e}}var defineProperty=function(){try{var e=getNative(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),baseSetToString=defineProperty?function(e,t){return defineProperty(e,"toString",{configurable:!0,enumerable:!1,value:constant(t),writable:!0})}:identity,setToString=shortOut(baseSetToString),MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(e,t){var a=typeof e;return!!(t=null==t?MAX_SAFE_INTEGER:t)&&("number"==a||"symbol"!=a&&reIsUint.test(e))&&-1<e&&e%1==0&&e<t}function baseAssignValue(e,t,a){"__proto__"==t&&defineProperty?defineProperty(e,t,{configurable:!0,enumerable:!0,value:a,writable:!0}):e[t]=a}function eq(e,t){return e===t||e!=e&&t!=t}var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function assignValue(e,t,a){var r=e[t];hasOwnProperty$2.call(e,t)&&eq(r,a)&&(void 0!==a||t in e)||baseAssignValue(e,t,a)}function copyObject(e,t,a,r){var n=!a;a=a||{};for(var o=-1,i=t.length;++o<i;){var s=t[o],c=r?r(a[s],e[s],s,a,e):void 0;void 0===c&&(c=e[s]),n?baseAssignValue(a,s,c):assignValue(a,s,c)}return a}var nativeMax=Math.max;function overRest(o,i,s){return i=nativeMax(void 0===i?o.length-1:i,0),function(){for(var e=arguments,t=-1,a=nativeMax(e.length-i,0),r=Array(a);++t<a;)r[t]=e[i+t];t=-1;for(var n=Array(i+1);++t<i;)n[t]=e[t];return n[i]=s(r),apply(o,this,n)}}function baseRest(e,t){return setToString(overRest(e,t,identity),e+"")}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=MAX_SAFE_INTEGER$1}function isArrayLike(e){return null!=e&&isLength(e.length)&&!isFunction(e)}function isIterateeCall(e,t,a){if(!isObject(a))return!1;var r=typeof t;return!!("number"==r?isArrayLike(a)&&isIndex(t,a.length):"string"==r&&t in a)&&eq(a[t],e)}function createAssigner(s){return baseRest(function(e,t){var a=-1,r=t.length,n=1<r?t[r-1]:void 0,o=2<r?t[2]:void 0;for(n=3<s.length&&"function"==typeof n?(r--,n):void 0,o&&isIterateeCall(t[0],t[1],o)&&(n=r<3?void 0:n,r=1),e=Object(e);++a<r;){var i=t[a];i&&s(e,i,a,n)}return e})}var objectProto$4=Object.prototype;function isPrototype(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||objectProto$4)}function baseTimes(e,t){for(var a=-1,r=Array(e);++a<e;)r[a]=t(a);return r}var argsTag="[object Arguments]";function baseIsArguments(e){return isObjectLike(e)&&baseGetTag(e)==argsTag}var objectProto$5=Object.prototype,hasOwnProperty$3=objectProto$5.hasOwnProperty,propertyIsEnumerable=objectProto$5.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(e){return isObjectLike(e)&&hasOwnProperty$3.call(e,"callee")&&!propertyIsEnumerable.call(e,"callee")};function stubFalse(){return!1}var freeExports="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag$1="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};function baseIsTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!typedArrayTags[baseGetTag(e)]}function baseUnary(t){return function(e){return t(e)}}typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0,typedArrayTags[argsTag$1]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=!1;var freeExports$1="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal.process,nodeUtil=function(){try{var e=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return e||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch(e){}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$4=objectProto$6.hasOwnProperty;function arrayLikeKeys(e,t){var a=isArray(e),r=!a&&isArguments(e),n=!a&&!r&&isBuffer(e),o=!a&&!r&&!n&&isTypedArray(e),i=a||r||n||o,s=i?baseTimes(e.length,String):[],c=s.length;for(var u in e)!t&&!hasOwnProperty$4.call(e,u)||i&&("length"==u||n&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||isIndex(u,c))||s.push(u);return s}function overArg(t,a){return function(e){return t(a(e))}}function nativeKeysIn(e){var t=[];if(null!=e)for(var a in Object(e))t.push(a);return t}var objectProto$7=Object.prototype,hasOwnProperty$5=objectProto$7.hasOwnProperty;function baseKeysIn(e){if(!isObject(e))return nativeKeysIn(e);var t=isPrototype(e),a=[];for(var r in e)("constructor"!=r||!t&&hasOwnProperty$5.call(e,r))&&a.push(r);return a}function keysIn(e){return isArrayLike(e)?arrayLikeKeys(e,!0):baseKeysIn(e)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var HASH_UNDEFINED="__lodash_hash_undefined__",objectProto$8=Object.prototype,hasOwnProperty$6=objectProto$8.hasOwnProperty;function hashGet(e){var t=this.__data__;if(nativeCreate){var a=t[e];return a===HASH_UNDEFINED?void 0:a}return hasOwnProperty$6.call(t,e)?t[e]:void 0}var objectProto$9=Object.prototype,hasOwnProperty$7=objectProto$9.hasOwnProperty;function hashHas(e){var t=this.__data__;return nativeCreate?void 0!==t[e]:hasOwnProperty$7.call(t,e)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(e,t){var a=this.__data__;return this.size+=this.has(e)?0:1,a[e]=nativeCreate&&void 0===t?HASH_UNDEFINED$1:t,this}function Hash(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var r=e[t];this.set(r[0],r[1])}}function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(e,t){for(var a=e.length;a--;)if(eq(e[a][0],t))return a;return-1}Hash.prototype.clear=hashClear,Hash.prototype.delete=hashDelete,Hash.prototype.get=hashGet,Hash.prototype.has=hashHas,Hash.prototype.set=hashSet;var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(e){var t=this.__data__,a=assocIndexOf(t,e);return!(a<0)&&(a==t.length-1?t.pop():splice.call(t,a,1),--this.size,!0)}function listCacheGet(e){var t=this.__data__,a=assocIndexOf(t,e);return a<0?void 0:t[a][1]}function listCacheHas(e){return-1<assocIndexOf(this.__data__,e)}function listCacheSet(e,t){var a=this.__data__,r=assocIndexOf(a,e);return r<0?(++this.size,a.push([e,t])):a[r][1]=t,this}function ListCache(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var r=e[t];this.set(r[0],r[1])}}ListCache.prototype.clear=listCacheClear,ListCache.prototype.delete=listCacheDelete,ListCache.prototype.get=listCacheGet,ListCache.prototype.has=listCacheHas,ListCache.prototype.set=listCacheSet;var Map$2=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$2||ListCache),string:new Hash}}function isKeyable(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function getMapData(e,t){var a=e.__data__;return isKeyable(t)?a["string"==typeof t?"string":"hash"]:a.map}function mapCacheDelete(e){var t=getMapData(this,e).delete(e);return this.size-=t?1:0,t}function mapCacheGet(e){return getMapData(this,e).get(e)}function mapCacheHas(e){return getMapData(this,e).has(e)}function mapCacheSet(e,t){var a=getMapData(this,e),r=a.size;return a.set(e,t),this.size+=a.size==r?0:1,this}function MapCache(e){var t=-1,a=null==e?0:e.length;for(this.clear();++t<a;){var r=e[t];this.set(r[0],r[1])}}MapCache.prototype.clear=mapCacheClear,MapCache.prototype.delete=mapCacheDelete,MapCache.prototype.get=mapCacheGet,MapCache.prototype.has=mapCacheHas,MapCache.prototype.set=mapCacheSet;var getPrototype=overArg(Object.getPrototypeOf,Object),objectTag$1="[object Object]",funcProto$2=Function.prototype,objectProto$a=Object.prototype,funcToString$2=funcProto$2.toString,hasOwnProperty$8=objectProto$a.hasOwnProperty,objectCtorString=funcToString$2.call(Object);function isPlainObject(e){if(!isObjectLike(e)||baseGetTag(e)!=objectTag$1)return!1;var t=getPrototype(e);if(null===t)return!0;var a=hasOwnProperty$8.call(t,"constructor")&&t.constructor;return"function"==typeof a&&a instanceof a&&funcToString$2.call(a)==objectCtorString}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(e){var t=this.__data__,a=t.delete(e);return this.size=t.size,a}function stackGet(e){return this.__data__.get(e)}function stackHas(e){return this.__data__.has(e)}var LARGE_ARRAY_SIZE=200;function stackSet(e,t){var a=this.__data__;if(a instanceof ListCache){var r=a.__data__;if(!Map$2||r.length<LARGE_ARRAY_SIZE-1)return r.push([e,t]),this.size=++a.size,this;a=this.__data__=new MapCache(r)}return a.set(e,t),this.size=a.size,this}function Stack(e){var t=this.__data__=new ListCache(e);this.size=t.size}Stack.prototype.clear=stackClear,Stack.prototype.delete=stackDelete,Stack.prototype.get=stackGet,Stack.prototype.has=stackHas,Stack.prototype.set=stackSet;var freeExports$2="object"==typeof exports&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&"object"==typeof module&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root.Buffer:void 0,allocUnsafe=Buffer$1?Buffer$1.allocUnsafe:void 0;function cloneBuffer(e,t){if(t)return e.slice();var a=e.length,r=allocUnsafe?allocUnsafe(a):new e.constructor(a);return e.copy(r),r}var Uint8Array=root.Uint8Array;function cloneArrayBuffer(e){var t=new e.constructor(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}function cloneTypedArray(e,t){var a=t?cloneArrayBuffer(e.buffer):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}function initCloneObject(e){return"function"!=typeof e.constructor||isPrototype(e)?{}:baseCreate(getPrototype(e))}function createBaseFor(c){return function(e,t,a){for(var r=-1,n=Object(e),o=a(e),i=o.length;i--;){var s=o[c?i:++r];if(!1===t(n[s],s,n))break}return e}}var baseFor=createBaseFor();function assignMergeValue(e,t,a){(void 0===a||eq(e[t],a))&&(void 0!==a||t in e)||baseAssignValue(e,t,a)}function isArrayLikeObject(e){return isObjectLike(e)&&isArrayLike(e)}function safeGet(e,t){if("__proto__"!=t)return e[t]}function toPlainObject(e){return copyObject(e,keysIn(e))}function baseMergeDeep(e,t,a,r,n,o,i){var s=safeGet(e,a),c=safeGet(t,a),u=i.get(c);if(u)assignMergeValue(e,a,u);else{var l=o?o(s,c,a+"",e,t,i):void 0,d=void 0===l;if(d){var f=isArray(c),p=!f&&isBuffer(c),m=!f&&!p&&isTypedArray(c);l=c,f||p||m?l=isArray(s)?s:isArrayLikeObject(s)?copyArray(s):p?cloneBuffer(c,!(d=!1)):m?cloneTypedArray(c,!(d=!1)):[]:isPlainObject(c)||isArguments(c)?isArguments(l=s)?l=toPlainObject(s):isObject(s)&&!isFunction(s)||(l=initCloneObject(c)):d=!1}d&&(i.set(c,l),n(l,c,r,o,i),i.delete(c)),assignMergeValue(e,a,l)}}function baseMerge(r,n,o,i,s){r!==n&&baseFor(n,function(e,t){if(isObject(e))s=s||new Stack,baseMergeDeep(r,n,t,o,baseMerge,i,s);else{var a=i?i(safeGet(r,t),e,t+"",r,n,s):void 0;void 0===a&&(a=e),assignMergeValue(r,t,a)}},keysIn)}var merge=createAssigner(function(e,t,a){baseMerge(e,t,a)});function initInputEventListeners(e){merge(optionsData,e),enableSaveAttribute(afterSync),initInboundDataSyncEventListener(),initSaveEventListener(),initRemoveAndHideEventListeners(),initChoiceAndToggleEventListeners(),initInputElementEventListener(),initClickToSaveEventListener(),initEditableAttribute(),initAddingItemEventListener()}var init=initInputEventListeners;exports.$=$$1,exports.Switches=Switches,exports.callMultipleWatchFunctions=callMultipleWatchFunctions,exports.callSaveFunction=callSaveFunction,exports.copyLayout=copyLayout,exports.getDataAndDataSourceElemFromNodeAndAncestors=getDataAndDataSourceElemFromNodeAndAncestors,exports.getDataFromNode=getDataFromNode,exports.getDataFromRootNode=getDataFromRootNode,exports.getLocationKeyValue=getLocationKeyValue,exports.getValueAndDataSourceElemFromKeyName=getValueAndDataSourceElemFromKeyName,exports.init=init,exports.initInputEventListeners=initInputEventListeners,exports.initSaveFunctions=initSaveFunctions,exports.setLocationKeyValue=setLocationKeyValue,exports.setValueForKeyName=setValueForKeyName;
